<!-- <div class="container-fluid mt-3" *ngIf="isXS">
  <div class="row">
    <div class="col">
      <file-actions 
        [cwd]="cwd" 
        [rowSelected]="rowSelected" 
        [userId]="userId" 
        [selection]="selection" 
        [userName]="userName"
      ></file-actions>
      <mat-card>
        <mat-form-field>
          <input matInput>
        </mat-form-field>
      </mat-card>
    </div>
  </div>
</div> -->

<div class="container-fluid mt-3">
  <div class="row">
    <div class="col">
      <div *ngIf="isXS">
        <file-actions 
          [mode]="1" 
          [cwd]="cwd" 
          [rowSelected]="rowSelected" 
          [selection]="selection" 
          [userId]="userId" 
          [userName]="userName$ | async"
        ></file-actions>
      </div>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-lg-10 col-md-10 col-sm-12 col-12">
      <mat-accordion class="example-headers-align" [multi]="true">
        <mat-expansion-panel [expanded]="true">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Recent Items
            </mat-panel-title>
            <mat-panel-description>
              <!-- Type your name and age
            <mat-icon>account_circle</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>
          <mat-divider></mat-divider>
          
          <!-- <file-thumbnail [mode]="1" [files]="(files$ | async)"></file-thumbnail> -->

        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="true">
          <mat-expansion-panel-header>
            <mat-panel-title>Favorites</mat-panel-title>
            <mat-panel-description>
              <!-- Type the country name
            <mat-icon>map</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>

          <mat-divider></mat-divider>

          <div class="favorites">
            <div *ngIf="!isFavorites">
              <p class="default-message">Files or folders that are starred will appear here</p>
            </div>
            <div *ngFor="let file of (files$ | async); index as i">
              <div *ngIf="file.IsFavorite" class="favorite">
                <img class="favorite-icon" [src]="setResource(file.ThumbnailPath)">
                <h3 class="favorite-title"> {{ file.Name }} </h3>
                <button mat-icon-button color="primary" class="ghost-toggle" (click)="editFavoriteStatus(file)">
                  <mat-icon class="favorite-star">star</mat-icon>
                </button>
                <ng-container [ngTemplateOutlet]="fileMenu"></ng-container>
              </div>
            </div>
          </div>

        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="true">
          <mat-expansion-panel-header>
            <mat-panel-title>Recent</mat-panel-title>
            <mat-panel-description>
              <!-- Inform the date you wish to travel
            <mat-icon>date_range</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>

          <div *ngIf="isFiles">
            <mat-divider></mat-divider>
            <div class="recents">
              <div class="recent" *ngFor="let file of (files$ | async); index as i">
                <img class="recent-icon" [src]="setResource(file.ThumbnailPath)">
                <ul class="recent-list">
                  <li><h3 class="">{{ file.Name }}</h3></li>
                  <li><p class="list-info">/Home{{ file.Path }}</p></li>
                  <li><p class="list-info">Added {{ file.CreatedOn | date }}</p></li>
                </ul>
                <button mat-icon-button color="primary" class="ghost-toggle" (click)="editFavoriteStatus(file)">
                  <div *ngIf="file.IsFavorite; then star; else starOutline"></div>
                </button>
                <ng-container [ngTemplateOutlet]="fileMenu"></ng-container>
              </div>
            </div>
          </div>

          <mat-list *ngIf="!isFiles">

            <mat-divider></mat-divider>

            <mat-list-item>
              <mat-icon mat-list-icon>insert_drive_file</mat-icon>
              <h4 mat-line>You have no recent files to display</h4>
              <p mat-line>Files that have been edited recently will appear here</p>
            </mat-list-item>

          </mat-list>

        </mat-expansion-panel>

      </mat-accordion>
    </div>
    <div class="col-lg-2 col-md-2 col-sm-12 col-12 mb-3 pl-0" *ngIf="!isXS">
      <file-actions
        [mode]="0"
        [cwd]="cwd"
        [rowSelected]="rowSelected"
        [selection]="selection"
        [userId]="userId"
        [userName]="(userName$ | async)"
      ></file-actions>
    </div>
  </div>
</div>

<ng-template #star>
  <mat-icon class="favorite-star">star</mat-icon>
</ng-template>

<ng-template #starOutline>
  <mat-icon class="favorite-star">star_border</mat-icon>
</ng-template>


<ng-template #fileMenu>
  <button class="settings" mat-icon-button [matMenuTriggerFor]="menu" (click)="$event.stopPropagation()">
    <mat-icon>more_vert</mat-icon>
  </button>
  <mat-menu #menu="matMenu" xPosition="before">
    <button mat-menu-item>
      <mat-icon>dialpad</mat-icon>
      <span>Redial</span>
    </button>
    <button mat-menu-item>
      <mat-icon>voicemail</mat-icon>
      <span>Check voice mail</span>
    </button>
    <button mat-menu-item>
      <mat-icon>notifications_off</mat-icon>
      <span>Disable alerts</span>
    </button>
  </mat-menu>
</ng-template>